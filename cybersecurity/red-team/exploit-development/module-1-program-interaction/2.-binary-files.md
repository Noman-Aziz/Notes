# 2. Binary Files

## [Slides](https://docs.google.com/presentation/d/1wrX8tvwaxIEk5hx4OtQmPqps-MScIaDO-9bTKQqr8vI/edit?usp=sharing)

### ELF

* Stands for executable and linkable format
* It is binary file format
* contains program and its data
* Describes how program should be loaded (program/segment) headers
* Contains metadata describing program components (section headers)
* **`readelf`** command can be used to see elk headers and data
* Magic byte : **`7f 45 4c 46`** or **`7f elf`**

#### Program Headers

Needed to prepare program for execution. Most important entry types are

1. `INTERP` : Defines the library that should be used to load this elf into memory
2. `LOAD` : Defines a part of file that should be loaded into memory

#### Section Headers

Different view of ELF with useful info for inspection and debugging. Important ones are

1. `.text` : executeable code of our program
2. `.plt` & `.got` : used to resolve and dispatch library calls
3. `.data` : used for pre-initialized global writeable data (such as global arrays with initial values)
4. `.rodata` : used for global read only data (such as string constants)
5. `.bss` : used for uninitialized global writeable data (such as global arrays without initial values)

Note : Section Headers are not necessary part of elf.

#### Symbols

Binaries and libraries that use DLLs rely symbols (names) to find libraries, resolve function calls into those libraries etc.

***

### Tools for digging in ELF

1. `gcc` : to make an elf
2. `readelf` : to parse elf header
3. `objdump` : to parse elf header and disassemble source code
4. `nm` : to view elf symbols
5. `patchelf` : to change some elf properties
6. `objcopy` : to swap out elf sections
7. `strip` : to remove otherwise-helpful info like symbols
8. **`[katai struct](https://ide.kaitai.io/)`** : to look through your elf interactively.

***
